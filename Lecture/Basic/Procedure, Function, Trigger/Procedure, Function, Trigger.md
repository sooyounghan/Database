-----
### 프로시저, 함수, 트리거
-----
1. 데이터베이스는 데이터 저장과 처리를 담당하고, 모든 비즈니스 로직과 절차는 애플리케이션 코드(Java, Python 등)에 있었음
2. 상황 : 우리 쇼핑몰에서 새로운 회원이 가입할 때, 시스템은 다음과 같은 여러 작업을 순서대로 처리해야 함
   - users 테이블에 새로운 고객 정보를 INSERT 
   - user_profiles 테이블에 고객의 상세 프로필 정보를 INSERT 
   - coupons 테이블에 신규 가입 축하 쿠폰을 INSERT 
   - logs 테이블에 신규 회원이 가입했다는 기록을 INSERT

   - 이 4개의 SQL 문 묶음은 '회원 가입'이라는 하나의 비즈니스 로직을 구성
   - 이러한 요구사항을 해결하기 위해 데이터베이스가 제공하는 기능이 바로 저장 프로시저(Stored Procedure), 저장함수(Stored Function), 그리고 트리거(Trigger) : 이들은 데이터베이스 내에 저장되어 실행되는 작은 프로그램 조각들

2. 💡 저장 프로시저 (Stored Procedure)
   - 정의 : 이름이 부여된 일련의 SQL 작업 묶음
   - 특징 : 파라미터를 받아 로직을 처리할 수 있고, IF문이나 LOOP문 같은 제어문도 사용할 수 있음
     + 여러 개의 INSERT, UPDATE, DELETE 작업을 포함하는 복잡한 비즈니스 로직을 하나의 단위로 처리하는데 사용
   -  호출 방식 : CALL 프로시저이름(파라미터1, 파라미터2); 와 같이 CALL 명령어로 독립적으로 호출

3. 💡 저장 함수 (Stored Function)
   - 정의 : 특정 계산을 수행하고 반드시 '하나의 값'을 반환하는 프로그램
   - 특징 : 프로시저와 달리, 반드시 하나의 값을 반환(RETURN) 해야 한다는 점이 다름
     + 이 특징 때문에, SUM() 이나 COUNT() 같은 내장 함수처럼 일반적인 SELECT 쿼리문 안에서 값의 일부로 사용될 수 있음
   - 사용 방식 : SELECT name, 나의함수(컬럼명) FROM 테이블; 처럼 쿼리의 일부로 사용

4. 💡 트리거 (Trigger)
   - 정의 : 특정 테이블에 특정 이벤트(Event)가 발생했을 때, 자동으로 실행되도록 약속된 프로그램
   - 특징 : 개발자가 직접 호출하는 것이 아니라, 특정 조건이 만족되면 데이터베이스에 의해 '방아쇠(Trigger)'가 당겨지듯 자동으로 실행
     + 여기서 '이벤트'란 INSERT, UPDATE, DELETE 같은 데이터 변경 작업을 의미
   - 사용 예시 : orders 테이블에 새로운 주문(INSERT)이 들어올 때마다, 자동으로 shipments (배송) 테이블에 새로운 배송 준비 데이터를 생성하거나, logs 테이블에 감사(Audit) 기록을 남기는 용도로 사용될 수 있음

5. 왜 이런 기능들이 존재할까?
   - 과거에는 이런 기능들이 자주 사용되었음
   - 성능 : 애플리케이션 서버의 성능이 좋지 않고 네트워크 속도가 느렸던 시절, 여러 개의 SQL을 네트워크를 통해 주고받는 것보다, 데이터베이스 안에 로직을 넣어두고 한 번만 호출하는 것이 훨씬 더 효율적이었음
   - 코드 재사용과 중앙화 : 여러 종류의 애플리케이션(Java 웹, Python 분석 스크립트, 엑셀 연동 툴 등)이 동일한 데이터베이스 로직을 사용해야 할 때, 로직을 데이터베이스의 프로시저에 중앙화시켜두면 모두가 일관된 로직을 재사용할 수 있음
   - 보안 : 사용자에게 테이블에 대한 직접적인 수정 권한을 주지 않고, 특정 프로시저를 실행할 수 있는 EXECUTE 권한만 부여할 수 있음 (이를 통해 미리 정의된 안전한 방식으로만 데이터를 변경하도록 강제할 수 있음)
   - 이처럼 데이터베이스에 로직을 저장하는 기능들은 그 자체로 매우 강력하며, 분명한 장점들을 가지고 있음
