-----
### 관계형 데이터베이스 핵심 개념
-----
1. 관계형 모델의 핵심 개념 : 모든 데이터는 '표'에서 시작
2. 관계형 데이터베이스는 데이터를 '표'의 형태로 관리
  - 테이블 (Table) : 관계형 데이터베이스에서 데이터를 저장하는 가장 기본적인 구조
    + 엑셀의 '시트(Sheet)'와 거의 동일한 개념
    + 쇼핑몰 데이터를 관리하기 위해 고객 테이블, 상품 테이블, 주문 테이블 등을 만들게 될 것
    + 이 테이블은 특정 주제와 관련된 데이터들의 집합

   - 행 (Row) : 테이블의 각 가로줄을 의미
     + 하나의 행은 개별적인 데이터 항목 하나를 나타냄
     + 예를 들어, 고객 테이블 에서 하나의 행은 고객 한 명의 정보를 의미
     + 실무 용어 : 행은 '레코드(Record)' 또는 '튜플(Tuple)'이라고도 불림

   - 열 (Column) : 테이블의 각 세로줄을 의미
     + 열은 테이블에 어떤 종류의 데이터가 저장될지를 정의
     + 고객 테이블 이라면 고객번호, 이름, 연락처, 주소 등이 각각의 열이 됨
     + 실무 용어: 열은 '속성(Attribute)' 또는 '필드(Field)'라고도 함

3. 예시
  - customers 테이블
<div align="center">
<img src="https://github.com/user-attachments/assets/8d585c55-5a25-4d86-b2a6-70cc7eac28d8">
</div>

   - 전체 표가 바로 테이블 (customers)
   - '이순신' 고객의 데이터 한 줄 (1, 이순신, 010-1111-1111, 서울시 강남구)이 바로 행(Row) : 이 테이블에는 총 3개의 행이 존재
   - customer_id, name, phone, address와 같은 세로 항목들이 바로 열(Column) : 이 테이블은 4개의 열로 구성

4. 관계형 데이터베이스의 시작은 이렇게 우리가 이미 알고 있는 '표'의 개념을 그대로 가져오는 것에서부터 출발
   - 다만, 데이터베이스는 여기에 몇 가지 강력한 규칙을 추가하여 엑셀의 한계를 뛰어넘음

-----
### 핵심 개념 1 : 기본 키(Primary Key) - 수많은 데이터 속에서 '단 하나'를 식별하는 방법
-----
1. 문제 상황 : 어떻게 데이터를 유일하게 구분할까?
  - 쇼핑몰을 운영하다 보니, 이름도, 주소도, 심지어 주문한 상품까지 완전히 똑같은 주문이 두 건 들어왔다고 가정
  - 동명이인이 같은 날 같은 상품을 주문한 것
<div align="center">
<img src="https://github.com/user-attachments/assets/a597853b-c118-40f7-8144-224d157ba12c">
</div>

  - 이 때, 고객 한 명이 주문을 취소해달라고 연락
  - 우리는 이 두 주문 중 어떤 것을 취소해야 할까? 이름, 주소, 상품명 그 어떤 정보로도 두 주문을 구분할 수가 없는데, 이것이 바로 데이터의 '식별' 문제
  - 해결 : 각 데이터를 유일하게 만들어주는 식별자, 기본 키(Primary Key)
    + 이 문제를 해결하기 위해 관계형 데이터베이스는 기본 키(Primary Key, 줄여서 PK) 개념 도입
    + 기본 키란, 테이블에 있는 모든 행(Row)들 중에서 특정 행 하나를 유일하게 식별할 수 있는 열(Column) 또는 열들의 조합을 말함
  - 기본 키는 두 가지 중요한 규칙을 반드시 지켜야 함
    + 고유성 (Uniqueness): 기본 키로 지정된 열의 값은 같은 테이블 내에서 절대 중복될 수 없으며, 모든 행이 서로 다른 값을 가져야 함
    + NOT NULL: 기본 키로 지정된 열에는 반드시 값이 있어야 한다. 비어있거나(NULL) 값이 없는 상태는 허용되지 않음 (NULL은 값이 존재하지 않는다는 표현)

2. 이 규칙을 적용하여 위의 orders 테이블을 다시 설계 : order_id 라는 이름의 열을 추가하고, 이 열을 기본키로 지정하는 것
<div align="center">
<img src="https://github.com/user-attachments/assets/33794bd9-1d68-4ce9-ae48-7ebc402fb30a">
</div>

  - 이제 다른 모든 정보가 똑같더라도, 우리는 order_id가 1001인 주문과 1002인 주문을 명확하게 구분할 수 있음
  - 고객이 주문을 취소해달라고 요청하면, 주문번호를 확인해서 정확한 처리가 가능해짐
  - 이처럼 기본 키는 각 데이터에 주민등록번호를 부여하는 것과 같음

3. 왜 기본 키가 필수적인가?
  - 수많은 데이터 속에서 특정 데이터 하나를 빠르고 정확하게 찾아내고, 수정하고, 삭제하기 위한 목적
  - 기본 키가 없다면 우리는 데이터의 바다에서 원하는 정보를 특정할 수 없다. 따라서 모든 테이블에는 기본 키를 설정하는 것이 원칙

4. 실무 이야기
  - 실무에서는 보통 id 라는 이름의 열을 만들고, 1부터 시작하여 데이터가 추가될 때마다 1씩 자동으로 증가 하는 정수(Integer) 값을 기본 키로 사용하는 경우가 가장 흔함
  - 고객 테이블은 customer_id, 상품 테이블은 product_id와 같이 테이블명_id 형식으로 이름을 짓는 것이 일반적인 관례

-----
### 핵심 개념 2: 외래 키(Foreign Key) - 따로 떨어진 표들을 '관계'로 묶는 방법
-----
1. 우리는 이제 데이터를 주제별로 나누어 테이블로 만들고, 각 테이블의 데이터는 기본 키로 식별할 수 있게 되었음
2. 문제 상황 : 쪼개진 표들을 어떻게 연결할까?
   - 데이터 중복을 피하기 위해, 우리는 정보를 '고객'과 '주문'이라는 두 개의 테이블로 나누어 저장하기로 함
<div align="center">
<img src="https://github.com/user-attachments/assets/a90b2913-30bc-434f-8e64-052ef654e7f5">
</div>

  - 이제 고객 정보는 customers 테이블에 한 번만 저장되므로, 이순신 고객이 100번을 주문해도 그의 정보는 중복해서 저장되지 않음
  - 주소가 바뀌면 customers 테이블의 해당 행 딱 한 곳만 수정하면 되므로 데이터 불일치 문제도 해결

3. 그런데 여기서 새로운 질문이 생기는데, "1001번 주문을 한 고객이 누구인지 어떻게 알 수 있는가?"
   - 두 테이블이 완전히 따로 떨어져 있기 때문에, 어떤 주문이 어떤 고객에 의해 이루어졌는지 연결할 방법이 보이지 않음
   - 해결 : 관계의 고리, 외래 키 (Foreign Key)
      + 이 문제를 해결하는 것이 바로 관계형 데이터베이스의 핵심이자 꽃이라 불리는 외래 키(Foreign Key, 줄여서 FK)
      + 외래 키란, 한 테이블(A)의 열(Column)이 다른 테이블(B)의 기본 키(Primary Key) 값을 참조하는 것을 말함
      + 즉, orders 테이블에 '이 주문은 어떤 고객의 것인가?'를 알려주는 정보를 추가하면 됨 : 이때 customers 테이블의 기본 키인 customer_id 를 orders 테이블에 가져와 사용하는 것
<div align="center">
<img src="https://github.com/user-attachments/assets/be7c2ea9-2e49-4d65-99bc-b064b34baf8a">
</div>

<div align="center">
<img src="https://github.com/user-attachments/assets/991df855-d601-488c-bb8a-41057abfbad9">
</div>

  - 이제 orders 테이블을 보면, 1001 번 주문의 customer_id 는 1
    + 이 1 이라는 값을 가지고 customers 테이블로 가보면, customer_id 가 1 인 고객이 '이순신'이라는 것을 바로 알 수 있음

4. 정리하면 다음과 같음
  - 1001번 주문의 customer_id가 1 이므로 '이순신' 고객의 주문임을 알 수 있음
  - 1002번 주문의 customer_id가 2 이므로 '강감찬' 고객의 주문임을 알 수 있음
  - 1003번 주문의 customer_id가 1 이므로 '이순신' 고객의 주문임을 알 수 있음

5. 이처럼 다른 테이블의 기본 키를 참조하는 orders 테이블의 customer_id 열, 이것이 바로 외래 키
   - 외래 키는 두 테이블을 연결하는 '관계의 고리' 역할을 함

6. 부모와 자식의 관계
    - 두 테이블이 FK 값을 통해 관계가 있을 때 한쪽을 부모, 한쪽을 자식이라 함
    - 자식 테이블은 FK 값을 통해 부모 테이블을 참조
    - FK 값을 가진 곳이 자식 테이블
    - 여기서는 orders 테이블이 FK 값인 customer_id를 통해 customers 테이블을 참조 : 따라서 둘의 관계에서 orders가 자식 테이블이고, customers가 부모 테이블

7. 외래 키의 중요한 규칙
    - 참조 무결성(Referential Integrity) : 외래 키 열에 있는 값은, 반드시 부모 테이블(참조 당하는 쪽, 여기서는 customers)의 기본 키 값 중 하나이거나, 혹은 비어있어야(NULL) 함
      + 예를 들어, orders 테이블의 customer_id에 customers 테이블에 존재하지도 않는 99 같은 값을 넣으려고 하면 데이터베이스가 "그런 고객은 존재하지 않습니다!"라며 오류를 발생시켜 막아줌
      + 이 덕분에 데이터의 정합성이 보장되는 것

    - 왜 외래 키를 사용해 테이블을 연결하는가?
      + 데이터의 중복을 막고, 데이터의 일관성을 유지하며, 논리적으로 분리된 데이터들 사이에 '관계'를 맺어주기 위해서임
      + 이를 통해 우리는 작고 관리하기 쉬운 여러 개의 테이블로 전체 시스템을 구조화할 수 있음
     
