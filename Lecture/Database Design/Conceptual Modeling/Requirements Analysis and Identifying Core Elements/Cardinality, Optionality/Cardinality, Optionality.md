-----
### 카디널리티와 참여도
-----
1. 엔티티라는 기둥을 세우고, 그 기둥들을 관계라는 선으로 연결
   - '회원'과 '주문' 사이에 선을 그었지만, "한 명의 회원이 여러 주문을 할 수 있는가?", "주문 없이 회원만 존재할 수 있는가?"와 같은 구체적인 규칙을 정립해야 함
   - 이 규칙을 정의하는 것이 바로 관계를 상세화하는 과정
   - 관계의 규칙을 정의하는 데에는 두 가지 핵심 요소가 존재 : 카디널리티(Cardinality)와 참여도(Optionality)

2. 관계의 수량, 카디널리티 분석하기
   - 카디널리티는 한 엔티티의 인스턴스(개별 데이터)가 다른 엔티티의 인스턴스와 몇 개나 관계를 맺을 수 있는지를 나타내는 수량 제약
   - 간단히 말해 1:1, 1:N, N:1, M:N 관계를 따지는 것
   - 카디널리티 관계의 4가지 종류
     + 일대일 (1 : 1)
     + 일대다 (1 : N)
     + 다대일 (N : 1)
     + 다대다 (M : N)
   - 💡 카디널리티 표기 기준 정리
     + 카디널리티는 엔티티 인스턴스(행) 하나가 다른 엔티티의 인스턴스와 맺을 수 있는 최대 숫자를 기준으로 표기
     + 1 (하나) : 한 엔티티의 인스턴스가 다른 엔티티의 인스턴스와 최대 1개의 관계를 가질 수 있을 때 사용
     + N (하나 이상) : 한 엔티티의 인스턴스가 다른 엔티티의 인스턴스와 1개 이상, 즉 여러 개의 관계를 가질 수 있을 때 사용

3. 일대일 (1 : 1)
<div align="center">
<img src="https://github.com/user-attachments/assets/212e0a5c-9c71-4277-8117-be3e023f8f29">
</div>

   - 예를 들어 쇼핑몰에 배송 이라는 엔티티가 있다고 가정 (여기서 배송은 쇼핑몰 회사가 배송의 상태를 추적하기 위해 사용한다고 가정)
   - 주문 인스턴스(행)가 하나 생성되면 해당 주문의 배송을 처리하는 배송 인스턴스(행)도 하나만 생성된다고 가정
   - 하나의 주문 인스턴스는 반드시 하나의 배송 인스턴스와 관계를 맺을 수 있음 : 예를 들어 주문1은 배송1이라는 하나의 인스턴스와 관계를 맺음
   - 하나의 배송 인스턴스는 반드시 하나의 주문 인스턴스와 관계를 맺을 수 있음 : 예를 들어 배송1은 주문1이라는 하나의 인스턴스와 관계를 맺음
   - 일대일 관계에서는 양쪽 방향 모두 하나의 인스턴스가 반드시 최대 하나의 인스턴스와만 관계를 맺을 수 있음
   - 만약 하나의 주문 인스턴스가 둘 이상의 배송 인스턴스와 관계를 맺을 수 있다면 이것은 일대일(1:1) 관계가 아님

4. 일대다 (1 : N)
<div align="center">
<img src="https://github.com/user-attachments/assets/d6661b36-0cb1-447d-aba5-270e63f3b624">
</div>

   - 한 명의 회원은 여러 번 주문 할 수 있음 (다, N) : 예를 들어 회원1 은 쇼핑몰에서 여러 번 주문할 수 있음 (회원1은 총 2번 주문해서 주문1, 주문2 와 관계를 맺음)
   - 하나의 주문은 여러 회원 에게 속할 수 없음 : 하나의 주문은 반드시 한 명의 주인만 가짐 (일, 1) : 예를 들어 주문1 은 회원1 에만 속하며, 하나의 주문을 여러 회원이 함께 진행할 수는 없음
   - 결론 : 회원과 주문은 일대다(1:N) 관계
   - 카디널리티 관계 쉽게 이해하기 - 일대다
      + 카디널리티를 쉽게 이해하는 핵심은 인스턴스 하나의 입장으로 각각 나누어 생각해보면 됨
      + 회원1의 입장 : 회원1 은 여러개의 주문을 가질 수 있으므로, 그래서 ?(회원) -> N(주문) 관계 - 여기서 핵심은 인스턴스 하나의 입장에서 상대편과의 관계를 봐야한다는 점
      + 반대로 주문1의 입장 : 주문1은 하나의 회원에만 속하므로 1(회원) <- ?(주문) 관계 - 여기서 핵심은 인스턴스 하나의 입장에서 상대편과의 관계를 봐야한다는 점
      + 이 둘을 합치면 1(회원) - N(주문) 관계를 알 수 있음
   - 물론 회원3 과 같이 하나만 주문해서 1:1 처럼 보이는 관계도 있고 회원4 와 같이 아직 주문하지 않은 회원이어서, 주문과 관계가 없는 인스턴스도 있음
   - 카디널리티는 엔티티 간의 관계에서 한 인스턴스가 가질 수 있는 최대의 숫자를 기준으로 표기 (최대 하나를 가지면 1, 하나 이상을 가질 수 있으면 N)

5. 다대일 (N : 1)
<div align="center">
<img src="https://github.com/user-attachments/assets/13095da3-77e5-4113-888a-900615263586">
</div>

   - 다대일 관계는 단순히 일대다 관계의 반대 (앞의 예제에서 단순히 둘의 위치만 바꿈)
   - 하나의 주문은 여러 회원에게 속할 수 없음 : 하나의 주문은 반드시 한 명의 주인만 가짐 (일, 1) - 예를 들어 주문1은 회원1에만 속하며, 하나의 주문을 여러 회원이 함께 진행할 수는 없음
   - 한 명의 회원은 여러 번 주문 할 수 있음 (다, N) - 예를 들어 회원1은 쇼핑몰에서 여러 번 주문할 수 있으며, 회원1은 총 2번 주문해서 주문1, 주문2와 관계를 맺음
   - 결론 : 주문과 회원은 다대일(N:1) 관계

6. 다대다 (M : N)
<div align="center">
<img src="https://github.com/user-attachments/assets/e8f1479c-bb2a-4603-94da-b7b2e2ca0e2e">
</div>

   - 하나의 주문에 여러 개의 상품이 포함될 수 있음 - 요구 사항에 "여러 상품을 한 번에 주문"할 수 있다고 명시되어 있음 (다, N)
   - 하나의 상품은 여러 주문에 포함될 수 있음 -  '좋은 키보드'라는 상품은 네이트도 주문하고, 이철수도 주문할 수 있음 (다, M)
   - 결론 : 주문과 상품은 다대다(M:N) 관계
     
   - 카디널리티 관계 쉽게 이해하기 - 다대다
      + 카디널리티를 쉽게 이해하는 핵심은 인스턴스 하나의 입장으로 각각 나누어 생각해보면 됨
      + 주문1의 입장 : 주문1은 상품1, 상품2 와 같이 여러개의 상품을 가질 수 있음 : ?(주문) -> N(상품) 관계가 됨 - 핵심은 인스턴스 하나의 입장에서 상대편과의 관계를 봐야한다는 점
      + 상품1의 입장 : 보면 상품1은 주문1 , 주문2 와 같이 여러 주문에 속함 : M(주문) <- ?(상품) 관계가 됨 - 핵심은 인스턴스 하나의 입장에서 상대편과의 관계를 봐야한다는 점  
      + 이 둘을 합치면 M(주문) - N(상품) 관계
   - 카디널리티는 엔티티 간의 관계에서 한 인스턴스가 가질 수 있는 최대의 숫자를 기준으로 표기

7. 카디널리티 표기 기준 정리(복습)
   - 카디널리티는 엔티티 인스턴스(행)가 다른 엔티티의 인스턴스와 맺을 수 있는 최대 숫자를 기준으로 표기
   - 1 (하나) : 한 엔티티의 인스턴스가 다른 엔티티의 인스턴스와 최대 1개의 관계를 가질 수 있을 때 사용
   - N (하나 이상) : 한 엔티티의 인스턴스가 다른 엔티티의 인스턴스와 1개 이상, 즉 여러 개의 관계를 가질 수 있을 때 사용 

8. 관계의 필수 여부, 참여도 분석하기
   - 참여도(Optionality) : 한 엔티티의 인스턴스가 관계에 반드시 참여해야 하는지(필수), 아니면 참여하지 않을 수도 있는지(선택)를 결정
   - 다시 회원과 주문의 관계 예시
      + 회원 입장에서 주문과의 관계는 필수인가, 선택인가?
        * 모든 회원이 반드시 주문을 해야만 하는것은 아님 - 가입만 하고 한 번도 주문하지 않은 회원이 있을 수 있으므로, 따라서 회원의 참여는 선택(Optional)
      + 주문 입장에서 회원 과의 관계는 필수인가, 선택인가?
        * 모든 주문은 반드시 특정 회원에게 속해야 함 - 어떤 회원인지도 모르는 유령 주문은 존재할 수 없으므로, 따라서 주문의 참여는 필수(Mandatory)

   - 카디널리티와 참여도 분석을 종합하면 관계를 아주 명확하게 정의할 수 있음
      + "한 명의 회원은 여러 개의 주문을 할 수도 있고 안 할 수도 있지만, 하나의 주문은 반드시 단 한 명의 회원에게 속해야만 한다."
      + 이처럼 카디널리티와 참여도를 정의함으로써 우리는 비즈니스 규칙을 데이터 모델에 정확하게 녹여낼 수 있음

9. 관계의 표현과 외래 키
   - 개념적 모델링 단계는 관계형 데이터베이스를 포함한 특정 기술에 종속되지 않음
   - 쉽게 이야기해서 개념적 모델링을 하고 나면 그 결과를 관계형 데이터베이스 뿐만 아니라 NoSQL 같은 곳에도 사용할 수 있음
   - 💡 개념적 모델링 단계에서는 엔티티 간의 관계를 관계선(Relationship)으로 표현하며, 외래 키 같은 특정 기술의 구현적 요소는 포함하지 않는 것이 원칙
     + 예를 들어서 개념적 모델링 단계에서는 외래 키를 표현하기 위해 주문에 회원ID를 포함하지 않음
   - 이후에 논리적 모델링 단계에서 주문 에 회원id 를 포함해서 이런 관계선이 외래 키로 표현
   - 참고로 논리적 모델링 단계는 관계형 데이터베이스에 맞는 구조로 모델링 하는 단계 : 따라서 외래 키 같은 내용이 등장
   - 주문 엔티티의 속성은 주문 자체의 고유한 특성만 포함 : 주문 번호, 주문 일시, 주문 상태, 배송지, 최종 결제 금액
   - 회원과 주문의 관계는 별도의 관계선으로 표현 : "회원이 주문을 한다" (1:N 관계) - 이때 외래 키를 표현하기 위해 회원ID를 주문 엔티티에 속성으로 넣지 않음

10. 실무에서는 개념적 모델링과 논리적 모델링을 따로 구분하지 않고 함께 진행하는 경우가 많음 : 따라서 처음부터 외래 키 값을 포함해서 함께 설계를 진행하기도 함
