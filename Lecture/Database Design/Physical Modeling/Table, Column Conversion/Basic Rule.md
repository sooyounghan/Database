-----
### 테이블과 컬럼 변환 규칙 - 기본 규칙
-----
1. 논리적 모델링에서 정의한 내용을 이제 실제 물리적인 테이블과 컬럼으로 변환할 차례
   - 이 과정에서 아무렇게나 이름을 짓는 것이 아니라, 프로젝트 전체의 일관성과 가독성을 높이고 미래의 유지보수를 용이하게 만들기 위해 명확한 '규칙'을 따라야 함
   - 이를 명명 규칙(Naming Convention)이라고 한며, 잘 정립된 명명 규칙은 그 자체로 훌륭한 문서가 됨

2. 절대적인 규칙은 없다.
   - 개발을 할 때 절대적인 규칙은 없음
   - 프로젝트의 종류와 규모에 따라서 규칙은 얼마든지 달라질 수 있음
   - 같은 규칙이라고 해도 프로젝트 종류와 규모에 따라서 잘 맞는 경우도 있고, 잘 맞지 않는 경우도 있음
   - 중요한 것은 프로젝트에 이런 규칙을 적용했을 때 어떤 장점이 있고, 어떤 단점이 있는지 진지하게 고민하고 결정하는 것
   - 그리고 그 결정을 일관성 있게 적용하는 것

3. 일반적인 명명 규칙 (Naming Convention)
   - 영어 사용 : 데이터베이스 객체(테이블, 컬럼 등)의 이름은 영어를 사용하는 것이 국제적인 표준
     + 한글 이름을 사용할 경우, 개발 환경이나 라이브러리에서 호환성 문제가 발생할 수 있음

   - 소문자 스네이크 케이스 (snake_case) : 테이블과 컬럼 이름은 모두 소문자로 작성하고, 단어가 여러 개 조합될 때는 언더스코어(_)로 연결하는 '스네이크 케이스'를 사용하는 것이 일반적
     + 예를 들어, order_item 이나 created_at과 같음
     + 대문자를 섞어 쓰는 것은 운영체제에 따라 테이블 이름을 다르게 인식하는 문제를 일으킬 수 있으므로 권장하지 않음

   - 명확하고 서술적인 이름 : 이름만 보고도 그 역할과 의미를 명확히 알 수 있도록 지음
     + 의미 없는 축약은 피하는 것이 좋음
     + 예를 들어 member_registration_datetime는 mem_reg_dt 보다 훨씬 이해하기 쉬움
     + 물론 팀에서 사용하는 축약어에 mem, reg, dt 를 등록해 두었다면 mem_reg_dt를 사용하는 것이 좋음

   - 일관성 있는 접두사와 접미사 : 이름에 일관성을 부여하면 가독성이 크게 향상
     + 예를 들어 모든 테이블의 기본 키(PK) 컬럼은 테이블명_id 형식(예) member_id, product_id)을 따르는 것이 좋음

   - 예약어 사용 금지 : ORDER, GROUP, SELECT, CREATE 등 SQL에서 이미 특별한 의미를 가지고 있는 예약어 (Reserved Words)는 테이블이나 컬럼 이름으로 사용해서는 안 됨
     + 주문 테이블의 경우 이런 이유로 예외적으로 order 대신에 orders를 사용
    
4. 컬럼 이름 규칙 : 참고하면 좋은 컬럼 이름 규칙
   - 기본 키(PK)는 '테이블명_id'로 명명
      + 가장 중요하고 기본적인 규칙 중 하나
      + 모든 테이블의 기본 키를 그냥 id 라고 이름 짓는 경우를 가정 : 당장은 편해 보일 수 있지만, 여러 테이블을 조인(JOIN)할 때 문제가 발생
        * 예를 들어, member 테이블과 orders 테이블에 모두 id라는 이름의 PK가 있다고 가정
```sql
SELECT
    id, -- 이 id가 member의 id인가, orders의 id인지 혼동
    member_name,
    ordered_at
FROM
    member
JOIN
    orders ON member.id = orders.member_id;
```
   - 위 SQL을 실행하면 데이터베이스는 id 컬럼이 어느 테이블에 속한 것인지 알 수 없어 Column 'id' in field list is ambiguous (필드 목록의 'id' 컬럼이 모호하다) 라는 오류를 발생
   - 물론 member.id 처럼 테이블 이름 또는 별칭을 명시하여 해결할 수 있지만, 모든 쿼리에서 이렇게 별칭을 붙이는 것은 매우 번거로움
   - 이제 우리가 설계한 것처럼 member_id, order_id 로 명명했을 때의 장점
```sql
SELECT
     m.member_id,
     o.order_id,
     m.member_name,
     o.ordered_at
FROM
     member m
JOIN
     orders o ON m.member_id = o.member_id;
```
   - 컬럼 이름만으로도 어떤 테이블의 ID인지 명확하게 구분
   - 이는 쿼리의 가독성을 극적으로 높여주고, 잠재적인 실수를 줄여줌
   - 컬럼 이름 그 자체로 데이터의 출처와 의미를 설명

   - 외래 키(FK)는 참조하는 테이블의 PK 이름을 그대로 사용
      + 이 규칙은 1번 규칙과 자연스럽게 이어지며, 외래 키는 다른 테이블과의 관계를 나타내는 중요한 열쇠이므로, 어떤 테이블을 참조하는지 이름만 보고도 알 수 있어야 함
      + 설계에서 orders 테이블의 member_id컬럼
         * orders 테이블의 member_id는 member 테이블의 member_id를 참조하는 외래 키
         * 이름이 같기 때문에 개발자는 orders 테이블의 member_id가 member 테이블과 관련이 있다는 것을 즉시 유추할 수 있음
         * 만약 orders 테이블에서 FK로 사용하는 회원 ID를 customer_id와 같이 다른 이름으로 지었다면,두 테이블의 관계를 파악하기 위해 매번 테이블의 구조를 확인해야 하는 번거로움이 생김

   - 날짜 / 시간 컬럼은 접미사로 용도를 명확히 함
      + 데이터가 언제 생성되었는지, 언제 수정되었는지, 또는 특정 이벤트가 언제 발생했는지를 기록하는 날짜 / 시간 컬럼은 매우 흔하다. 이런 컬럼들에는 일관된 접미사를 붙여주는 것이 좋음
      + _at : 특정 작업이 발생한 정확한 시점(날짜와 시간)을 기록할 때 사용 ('at a specific time'의 의미)
         * 주로 특정 사건(이벤트)가 발생한 시간을 기록할 때 사용
         * 주문 시각, 취소 시각, 로그인 시각 등 (예) created_at, updated_at, deleted_at, logined_at, ordered_at, paid_at)
      + datetime, dt : 일시, 날짜와 시간 정보가 중요할 때 사용하며, 너무 길기 때문에 dt 로 많이 줄여서 사용
         * 예) start_dt, end_dt, reservation_dt
         * 예약일시, 이벤트 시작 / 종료 시각이나 예약 시각처럼 특정 기간이나 시점을 명시할 때 유용
      + _date : 날짜 정보에만 사용하며, 시간 정보가 필요 없거나 의미가 없는 경우에 적합
         * 예) birth_date, join_date, release_date (회원의 생년월일이나 상품 출시일 등이 좋은 예)
      + _time : 시간 정보에만 사용하며, 날짜와 관계없이 특정 시간 정보가 필요할 때 사용
         * 예) opening_time, closing_time, notification_time (상점의 영업 시작 및 종료 시간이나, 매일 반복되는 알림 시간 설정 등에 사용할 수 있음)

5. 용어 사전에 추가 - 날짜 / 시간 : 이런 규칙을 확정했다면 용어 사전에 추가해서 관리하는 것이 좋음
<div align="center">
<img src="https://github.com/user-attachments/assets/672a7ff9-a408-41b7-a6f7-aa1607da1905">
</div>

6. 불리언(Boolean) 타입 컬럼은 'is_' 또는 'has_' 접두사를 사용
    - 참(True) 또는 거짓(False) 상태를 나타내는 불리언 컬럼은 그 의미를 명확히 하기 위해 is_나 has_와 같은 접두사를 붙이는 것이 좋음
    - 이는 쿼리의 WHERE 절을 읽을 때 마치 자연스러운 문장처럼 만들어줌
    - 예를 들어, '탈퇴한 회원'을 저장하는 컬럼 이름이 그냥 withdrawal이라고 가정
       + WHERE withdrawal = TRUE : 이것이 탈퇴했다는 의미인지, 탈퇴가 가능하다는 의미인지 즉시 파악하기 어려움
       + 하지만 is_withdrawal 이라고 명명하면 의미가 명확해짐 : WHERE is_withdrawal = TRUE (탈퇴했는가? = 그렇다)
    - 다른 좋은 예시는 다음과 같음
      + is_active : 현재 활성 상태인가?  
      + has_coupon : 쿠폰을 가지고 있는가?
      + is_shipped : 배송이 완료되었는가?

7. 컬럼은 단수 명사 사용
    - 컬럼은 테이블의 한 행(Row)이 가지는 단일 속성을 나타내므로, 단수 명사를 사용해야 함 (예시) product_name (O), product_names (X))
    - 이유 : 테이블 이름은 집합을 의미하므로 규칙을 정하기에 따라 복수형을 쓰기도 하지만, 컬럼은 단일 값을 저장하므로 반드시 단수형을 사용해야 함

8. 의미 있는 축약어
   - 팀 내에서 모두가 동의하고 그 의미를 명확히 알 수 있는 축약어가 아니라면, 완전한 단어를 사용하는 것이 좋음
   - 팀 내에서 모두 동의하는 축약어는 qty(quantity), id(identifier)는 단 2가지라고 가정
      + 좋은 예시) quantity 대신 qty, identifier 대신 id
      + 나쁜 예시) stock을 stk로, member_registration_date를 mem_reg_dt로 줄이는 것은 가독성을 해침
   - 이유 : 명확성은 간결성보다 우선 (몇 글자를 아끼기 위해 미래의 개발자가 의미를 추측하게 만드는 것은 장기적으로 더 큰 비용을 발생시킴)

9. 데이터의 성격을 명확히 표현
   - 단위나 종류 명시 : 만약 우리 쇼핑몰이 여러 국가의 통화를 지원한다면, price 대신 price_krw, price_usd 처럼 통화 단위를 명시해 주는 것이 좋음
     + 무게를 다룬다면 weight_kg, weight_g 처럼 단위를 포함하는 것이 혼동을 막음
   - 문맥 제공 : product 테이블의 상품명 컬럼은 product_name 대신에 name도 간결하고 괜찮아 보임
      + product 라는 테이블의 문맥 안에서는 name이 상품명을 의미한다는 것을 쉽게 알 수 있기 때문임
      + 하지만 여러 테이블을 JOIN 한 결과에서는 name 보다는 product_name이 더 명확할 수 있음
      + 예를 들어 member 테이블에도 name 이 있다면, 별칭을 통한 둘의 구분이 필요하기 때문임
      + 따라서 문맥을 활용하는 방식을 기본으로 하되, 여러 테이블에서 자주 사용되는 용어라면 구분을 고려

10. 일관성의 중요성
     - 위에서 제시한 규칙들은 널리 사용되는 좋은 관례이지만, 절대적인 법칙은 아님
     - 가장 중요한 원칙은 '일관성' : 하나의 프로젝트에서는 모든 팀원이 동의한 하나의 명명 규칙을 정하고, 데이터베이스 전체에 걸쳐 일관되게 적용해야 함
     - 일관성만 있다면 설령 조금 특이한 규칙이라도 괜찮음
     - 단, 일관성이 깨지는 순간, 데이터베이스는 이해하기 어렵고 유지보수하기 힘든 골칫덩어리가 될 수 있음
