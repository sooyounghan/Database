-----
### 정리
-----
1. 다양한 종류의 키
   - 데이터베이스 설계는 개념적, 논리적, 물리적 모델링의 3단계로 진행
   - 논리적 모델링은 개념 모델을 관계형 데이터베이스 구조에 맞게 변환하는 과정이며, 키(Key) 정의가 핵심
   - 키는 각 행(Row)을 유일하게 식별하고, 테이블 간의 관계를 맺으며, 데이터 무결성을 보장하는 핵심 장치
     + 기본 키(Primary Key) : 테이블의 대표 키로, NULL이 없고 유일하며 변하지 않아야 함
     + 후보 키(Candidate Key) : 기본 키가 될 수 있는 키로, 유일성과 최소성을 만족해야 함
     + 외래 키(Foreign Key) : 다른 테이블의 기본 키를 참조하여 테이블 간의 관계를 연결하는 역할을 함

2. 자연 키
   - 자연 키(Natural Key)는 주민등록번호, 이메일처럼 비즈니스 로직에서 자연스럽게 발생하는 의미 있는 데이터를 기본 키로 사용하는 것
   - 자연 키의 치명적 약점은 변경 가능성 : 실무에서 기본 키는 절대로 변하면 안 됨
   - 자연 키를 기본 키로 사용하면, 해당 값이 변경될 때 참조 무결성 제약조건 위반, 연쇄 업데이트로 인한 시스템 부하, 데이터 역사성 훼손, 외부 시스템 연동 문제 등 심각한 문제가 발생할 수 있음

3. 대리 키
   - 대리 키(Surrogate Key)는 비즈니스 로직과 무관한, 오직 데이터 식별을 위해 시스템이 자동 생성하는 값(예) 1, 2, 3... 또는 UUID)을 기본 키로 사용하는 것
   - 대리 키는 절대 변하지 않으므로, 비즈니스 로직(예: 이메일 주소)이 변경되어도 데이터 구조의 안정성이 유지됨
   - 현대 데이터베이스 설계의 표준 패턴
     + 대리 키를 기본 키(PK)로 사용하여 관계의 안정성을 확보
     + 자연 키에는 UNIQUE 제약조건을 적용하여 비즈니스 데이터의 고유성을 보장

4. 성능 트레이드 오프
   - 자연 키는 일부 상황에 JOIN 없이 조회가 가능해 단순 조회에 유리할 수 있지만, 외래 키의 크기가 커져 공간을 낭비하고 인덱스 단편화로 쓰기 성능을 저하시키는 단점
   - 대리 키는 추가적인 JOIN이 발생할 수 있으나, 외래 키 크기가 작아 효율적이고 순차적으로 값이 증가하여 쓰기 성능이 매우 뛰어남
   - 성능 관점에서도 데이터 모델의 안정성, 유연성, 쓰기 성능의 이점이 더 크기 때문에 대부분 대리 키를 기본 키로 선택

5. 현대적인 설계
   - 현대적인 설계에서는 대리 키 사용을 강력하게 권장 : 이는 데이터의 식별자(ID)를 비즈니스 로직으로부터 완전히 분리하여 느슨한 결합(Loose Coupling)을 유지하기 위함
   - 비즈니스 요구사항의 빠른 변화, JPA 같은 ORM 기술의 보편화, 마이크로서비스 아키텍처의 등장으로 인해 불변성을 가진 대리 키의 중요성이 더욱 커짐

6. 복합키 설계
   - 복합키(Composite Key)는 두 개 이상의 컬럼을 묶어서 하나의 기본 키로 사용하는 것
   - 자연 키를 복합키로 사용하면 변경 가능성, 외래 키 참조의 복잡성 및 크기 증가, ORM 사용의 어려움 등 여러 문제가 발생
   - 복합키 문제의 대안 역시 대리 키를 기본 키(PK)로 사용하고, 비즈니스적 유일성이 필요한 복합 컬럼들에는 UNIQUE 제약조건을 설정하는 것

7. 다대다 관계와 복합키
   - 다대다(N:M) 관계는 두 테이블을 직접 연결할 수 없어, 중간에 연결 테이블을 만들어 해소
   - 이 연결 테이블의 기본 키는 두 테이블의 외래 키를 묶은 복합키로 만들 수 있음 : 이는 데이터 무결성을 보장하지만 복합키의 단점을 그대로 가짐
   - 권장되는 현대적인 방식은 연결 테이블에도 별도의 대리 키(PK)를 만들고, 두 외래 키의 조합에는 복합 UNIQUE 제약조건을 설정하는 것
   - 이 방식은 대리 키의 단순성, 불변성, 확장성과 복합키의 데이터 정합성 보장이라는 장점을 모두 취할 수 있음
