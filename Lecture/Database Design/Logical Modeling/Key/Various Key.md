-----
### 다양한 종류의 키
-----
1. 데이터베이스 설계의 3단계
   - 개념적 모델링 (Conceptual Modeling) : 개념적 모델링은 복잡한 현실 세계의 비즈니스 요구사항을 누구나 이해하기 쉬운 그림으로 단순화하는 것에 초점을 맞춤
     + "어떤 데이터가 필요한가?", "데이터들은 서로 어떤 관계를 맺고 있는가?"와 같은 근본적인 질문에 답하는 단계라고 할 수 있음
     + 이 단계는 비즈니스 요구사항을 이해하고, 데이터의 큰 그림을 그리는 과정
     + 어떤 데이터가 필요한지(엔티티), 데이터들 사이에 어떤 관계가 있는지(관계)를 식별하여 ERD(Entity-Relationship Diagram)로 표현
     + '회원', '상품', '주문' 같은 엔티티를 도출하고 그 관계를 정의한 것이 바로 개념적 모델링
     + 마치 건물의 아이디어를 스케치하는 것과 같음

   - 논리적 모델링 (Logical Modeling) : 논리적 모델링은 개념적 모델링에서 만든 청사진을 관계형 데이터베이스 구조에 맞게 변환하는 과정
     + 엔티티는 테이블로, 속성은 컬럼으로 바꾸고, 각 테이블의 기본 키(Primary Key)와 테이블 간의 관계를 표현하는 외래 키(Foreign Key) 등을 정의
     + 이 단계는 특정 관계형 데이터베이스 시스템(MySQL, Oracle 등)에 종속되지 않는, 순수한 관계형 데이터베이스 모델을 만드는 것이 목표
     + 건물의 기본 설계도를 그리는 단계라고 할 수 있음
     + 릴레이션 용어
       * 논리적 모델링 단계에서 학술적으로는 릴레이션(Relation), 튜플(Tuple), 속성(Attribute)이라는 용어를 사용
       * 하지만 실무에서는 거의 쓰이지 않고, 대신에 테이블(Table), 행(Row), 컬럼(Column)이라는 용어를 사용

   - 물리적 모델링 (Physical Modeling) : 논리적 모델을 실제 사용할 데이터베이스 시스템(우리의 경우 MySQL)에 최적화하여 구현하는 마지막 단계
     + 각 컬럼의 구체적인 데이터 타입(예) VARCHAR(50) , BIGINT)을 결정하고, 성능 최적화를 위한 인덱스를 설정하며, 파일 저장 방식 등 물리적인 요소를 고려
     + 건물의 시공을 위해 철근의 종류나 콘크리트의 강도까지 정하는 상세 시공 설계도를 만드는 것과 같음

2. 논리적 모델링은 개념적 모델을 관계형 데이터베이스 이론에 맞게 변환하는 과정
   - 특정 RDBMS(MySQL, Oracle등)에 종속되지 않는, 순수한 데이터 구조를 설계
   - 이 과정에서 가장 먼저, 그리고 가장 중요하게 다루어야 할 주제가 바로 '키(Key)'

3. 왜 '키'가 그렇게 중요한가?
   - 쇼핑몰에 '션'이라는 이름을 가진 회원이 수십 명이라면, 특정 '션' 회원의 주문 내역을 어떻게 정확히 찾아낼 수 있을까?
   - 만약 상품 테이블에 이름과 가격이 똑같은 상품이 두 개 등록되어 있다면, 고객이 주문한 상품이 둘 중 어느 것인지 어떻게 구별할까?
   - 이러한 문제들을 해결하기 위해 데이터베이스는 각 데이터 행(Row)을 유일하게 식별할 수 있는 장치가 필요 : 키(Key)
   - 키는 단순히 데이터를 찾는 용도로만 쓰이지 않음
   - 테이블과 테이블을 연결하여 관계를 맺어주고(예) 어떤 회원이 어떤 주문을 했는지), 데이터가 중복되거나 잘못 입력되는 것을 막아주는 무결성 제약조건의 역할도 수행
   - 즉, 키는 데이터베이스 설계의 가장 근본적인 주춧돌이며, 데이터의 신뢰성을 보장하는 핵심 장치

4. 💡 모든 데이터를 구별하는 열쇠, 키(Key)
   - 키(Key)는 테이블에 있는 각각의 행(Row)을 고유하게 식별할 수 있는 하나 이상의 컬럼 집합
   -  키의 종류는 여러 가지가 있으며, 각각의 역할과 의미를 명확하게 이해해야 함
   - 기본 키 (Primary Key - PK) : 테이블의 모든 행을 유일하게 식별하는 대표 키
      + 기본 키가 반드시 지켜야 하는 3가지 규칙
         * NULL 값을 가질 수 없음 (NOT NULL)
         * 반드시 유일해야 함 (UNIQUE)
         * 값이 변하지 않아야 한다 (불변성) - 이론적으로 기본 키의 값을 변경할 수는 있으며, 기본 키 값이 변하면 이 키를 참조하는 모든 외래 키(FK)와 데이터 무결성에 큰 문제가 생기므로, 실무에서는 절대로 기본 키의 값을 변경하면 안 됨
      + 예) 회원 테이블의 member_id, 상품 테이블의 product_id가 바로 기본 키
       * 이 키만 있으면 우리는 수백만 명의 회원 중에서 정확히 한 명을, 수십만 개의 상품 중에서 정확히 하나를 콕 집어낼 수 있음

   - 후보 키 (Candidate Key) : 후보 키는 말 그대로 기본 키가 될 수 있는 '후보 선수들'
      + 기본 키가 될 수 있는 자격, 즉 유일성과 최소성을 모두 만족하는 모든 키
      + 유일성(Unique) : 모든 행을 서로 구분할 수 있어야 함
      + 최소성(Minimality) : 행을 유일하게 식별하는 데 꼭 필요한 최소한의 컬럼만 포함해야 함
      + 예) 회원 테이블에서 member_id 외에 이메일(email)이나 연락처(phone_number)도 모든 회원이 서로 다른 값을 가진다고 규칙을 정한다면(UNIQUE 제약조건), 이 컬럼들도 후보 키가 될 수 있음

   - 대체 키 (Alternate Key) : 후보 키 중에서 기본 키로 선택되지 않은 나머지 키들을 말함
      + 만약 member_id를 기본 키로 선택했다면, 후보 키였던 이메일과 연락처는 대체 키
      + 이들 역시 데이터를 찾는 데 유용하게 사용할 수 있음

   - 외래 키 (Foreign Key - FK) : 가장 중요한 키 중 하나로, 테이블 간의 관계를 연결하는 역할을 함
      + 한 테이블의 컬럼이 다른 테이블의 기본 키를 참조하는 것
      + '쇼핑몰'의 orders 테이블에 있는 member_id 컬럼을 생각
        * 이 컬럼에는 주문한 회원의 ID가 저장
        * 이 값은 member 테이블에 있는 member_id (기본 키) 값 중 하나여야만 함
        * 이렇게 orders 테이블의 member_id가 member 테이블을 참조할 때, 이 컬럼을 외래 키라고 부름

      + 외래 키 덕분에 우리는 주문 정보만 보고도 어떤 회원이 주문했는지 정확히 알 수 있으며, 이 외래 키 컬럼에 외래 키 제약조건을 걸어주면 존재하지 않는 회원이 주문하는 것과 같은 데이터 불일치를 원천적으로 막을 수 있음

-----
### 최소성이란?
-----
1. 유일성을 만족하더라도, 불필요한 컬럼을 포함하여 최소성을 만족하지 못하는 키는 후보 키가 될 수 없음
2. 참고로 키를 구성할 때 여러 컬럼을 묶어서 하나의 키를 구성할 수 있는데, 이것을 복합키라고 함
3. 최소성 예시1 : 회원
   - 예를 들어 다음과 같은 테이블과 컬럼이 있다고 가정
```
회원(member_id, email, phone_number, name)
```
   - {member_id, email} → 모든 회원을 구분할 수 있지만, member_id 하나만으로도 구분 가능하므로 최소성을 위배하므로, 따라서 후보 키가 될 수 없음
   - {email, phone_number} → 모든 회원을 구분 가능하지만, email 하나만으로도 구분 가능하므로 최소성을 위배하므로, 따라서 후보 키가 될 수 없음
   - member_id → 유일하고 최소 : 후보 키 가능
   - email → 유일하고 최소 : 후보 키 가능
   - phone_number → 유일하고 최소 : 후보 키 가능

4. 최소성 예시2 : 강의실 좌석
   - 강의실의 좌석 배치를 생각
   - 각 좌석을 구분하기 위한 테이블 classroom_seat가 있다고 가정
   - 이 테이블은 학생들의 좌석을 행(row)과 열(column)로 관리
<div align="center">
<img src="https://github.com/user-attachments/assets/d21e7ff5-fa30-465c-86d0-5c98034509d6">
</div>

   - 이 테이블에서 특정 좌석을 유일하게 찾아내기 위한 후보 키로 {row, col} 복합키를 생각해 볼 수 있음
   - 유일성 확인
     + {row, col}의 조합은 전체 테이블에서 항상 유일한가? 그렇다. {1, 1} 이라는 조합은 '김철수' 학생의 자리 하나만을 특정
     + 다른 좌석이 {1, 1} 값을 가질 수 없으므로 유일성을 만족

  - 최소성 확인
     + 그렇다면 이 조합에서 어느 하나라도 빼도 유일할까?
     + row 만으로 좌석을 식별할 수 없음 : row 가 1인 좌석은 '김철수'와 '이영희' 두 명이 존재
     + col 만으로 좌석을 식별할 수 없음 : col 이 1인 좌석은 '김철수'와 '박지성' 두 명이 존재
   - 결론적으로 {row, col} 조합은 유일성을 만족하고, 두 컬럼 중 어느 하나라도 빠지면 유일성이 깨지므로 최소성 또한 만족 : 따라서 {row, col}은 최소성을 만족하는 복합키이자 후보 키
