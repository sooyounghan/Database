-----
### 정리 - 일대다 관계의 외래 키 위치
-----
1. team 테이블 (1 쪽)에 외래 키를 두는 방법
   - '개발팀' 행 안에 '김개발(1)'과 '박개발(2)'의 정보를 모두 담아야 함
   - 방법이 없으니 문자열로 억지로 저장한 모습일 경우
<div align="center">
<img src="https://github.com/user-attachments/assets/98fb1fcd-4b20-44e5-811c-0e989bccf4d1">
</div>

   - team 테이블에서 '개발팀(team_id:1)'은 자신의 팀에 속한 여러 회원을 알아야 함
   - team 테이블에서 '개발팀'은 하나의 행에만 존재할 수 있음
     + '개발팀'이라는 하나의 행에 여러 회원들의 ID를 억지로 보관할 수는 있지만 앞서 설명한 수 많은 부작용이 발생

2. member 테이블 (N 쪽)에 외래 키를 두는 방법
   - 각 회원은 고유한 행을 가지며, team_id 컬럼에 자신이 속한 팀의 ID '단 하나'만 저장하면 됨
<div align="center">
<img src="https://github.com/user-attachments/assets/c92d1251-85eb-468a-9c59-9682455bdae2">
</div>

   - member 테이블에서 김개발(member_id:1) 회원은 하나의 팀에만 속하면 됨 : 따라서 team_id 컬럼에 자신이 속한 팀의 ID '단 하나'만 저장하면 됨
   - '다(N)' 쪽의 개체(회원)는 '일(1)' 쪽의 개체(팀)를 단 하나만 참조하기 때문에, member 테이블에 team_id 라는 단일 컬럼을 두는 것으로 관계가 완벽하게 표현
   - 다시 정리하자면 이처럼 '다(N)' 쪽에 외래 키를 두는 것이 일대다 관계를 표현하는 올바른 방법

-----
### 관계형 데이터베이스의 법칙과 외래 키의 위치
-----
1. 관계형 데이터베이스에서 테이블의 행(row)의 법칙
   - 기본 키(PK)는 반드시 유일 : 한 테이블 안에서 동일한 PK를 가진 행은 존재할 수 없음
   - 외래 키(FK)는 단일 행만 참조 : 외래 키 값 하나는 상대 테이블의 정확히 한 행만 가리킴
   - 컬럼은 원자적(atomic)이어야 함 : 하나의 컬럼에 여러 값을 넣을 수 없음 (제1정규형)

2. 관계의 법칙 : 왜 외래 키는 '다(N)'에만 존재할 수 있는가?
   - 앞서 살펴본 3가지 기본 제약은 관계형 데이터베이스가 데이터를 일관되고 안정적으로 유지하기 위한 최소한의 약속
   - 이 약속들을 기반으로 왜 외래 키가 반드시 '다(N)' 쪽에 위치해야만 하는지 증명
   - '일(1)' 쪽 테이블의 딜레마
     + 만약 '일(1)' 쪽인 team 테이블에 외래 키를 두어 소속된 회원을 표현한다고 가정
     + '개발팀'은 여러 명의 회원을 가져야 한다는 비즈니스 요구사항이 존재
     + 하지만 데이터베이스의 제약 때문에 team 테이블은 이 요구사항을 담아낼 수 없음
<div align="center">
<img src="https://github.com/user-attachments/assets/632898af-92b8-4e48-b1f3-48bba816f512">
</div>

   - team 테이블의 기본 키(team_id)는 유일해야 하므로(제약 1), '개발팀'은 단 하나의 행으로만 존재해야 함
   - 여러 행에 걸쳐 '개발팀'을 저장할 수 음

<div align="center">
<img src="https://github.com/user-attachments/assets/97fd141f-5512-4f69-9986-0717a86946f5">
</div>

   - 하나의 행에 있는 컬럼은 원자적이어야 하므로(제약 3), member_id와 같은 컬럼에는 단 하나의 값만 저장할 수 있음
   - 여러 회원의 ID를 하나의 컬럼에 넣는 것은 불가능
   - 이 두 가지 제약이 충돌하면서 논리적인 모순이 발생
   - '개발팀'이라는 하나의 행에 여러 회원의 정보를 담아야 하는데, 컬럼에는 하나의 값만 넣을 수 있음
   - 이 문제를 해결할 방법은 관계형 데이터베이스의 규칙 안에서는 존재하지 않음
   - '다(N)' 쪽 테이블의 명쾌한 해답 : 반대로 '다(N)' 쪽인 member 테이블에 외래 키(team_id)를 두는 경우
<div align="center">
<img src="https://github.com/user-attachments/assets/01045e5c-3549-425a-9e8a-8f8f1d878e51">
</div>

   - '김개발'이라는 회원은 오직 하나의 팀에만 소속
   - 따라서 member 테이블의 '김개발' 행에 있는 team_id 컬럼에는 단 하나의 값만 저장하면 됨 : 이는 컬럼의 원자성(제약 3)을 완벽하게 만족
   - 이 team_id 값은 team 테이블의 유일한 하나의 행을 정확히 가리킴 : 즉, 외래 키가 단일 행만 참조한다는 제약(제약 2)을 만족
   - 물론 member 테이블의 기본 키(member_id)도 유일성을 유지하며(제약 1), team 테이블의 기본 키도 마찬가지

3. '박개발' 회원도, '최디자인' 회원도 각자의 행에서 자신이 속한 팀의 ID 하나만 team_id 컬럼에 저장하면 됨
   - 어떤 제약과도 충돌하지 않으며, 모든 규칙을 완벽하게 준수

4. 결론적으로, '일대다' 관계에서 외래 키를 '다(N)' 쪽에 두는 것은 선택의 문제가 아니라, 관계형 데이터베이스의 기본 제약을 모두 만족시키는 유일하고 올바른 방법 : 이것이 관계형 데이터베이스가 관계를 표현하는 근본적인 원리
